@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@using System.Text.Json
@{
    ViewBag.Title = "Landing";
    var userJson = Context.Session.GetString("User");
    string? displayName = null;
    if (!string.IsNullOrEmpty(userJson))
    {
        try
        {
            using var doc = JsonDocument.Parse(userJson);
            if (doc.RootElement.TryGetProperty("FullName", out var fn) && fn.ValueKind == JsonValueKind.String && !string.IsNullOrWhiteSpace(fn.GetString()))
                displayName = fn.GetString();
            else if (doc.RootElement.TryGetProperty("Username", out var un))
                displayName = un.GetString();
        }
        catch { displayName = null; }
    }
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat App - Meet the World</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link href="~/css/landingPage.css" rel="stylesheet" />

</head>
<body>

    <header class="main-header" role="banner">
        <div class="container">
            <a href="#" class="logo">ChatApp</a>
            <nav class="nav-links" aria-label="Main navigation">
                <a href="/User/friend">Friends</a>
                <a href="/User/setting">Settings</a>
                <a href="/User/block">Block</a>
                @if (!string.IsNullOrEmpty(displayName))
                {
                    <div class="user-actions">
                        <span class="user-greeting">Hello, @displayName</span>
                        <form method="post" asp-controller="User" asp-action="Logout" class="logout-form">
                            <button type="submit" class="btn-logout">Log out</button>
                        </form>
                    </div>
                }
                else
                {
                    <a href="@Url.Action("login", "User")">Sign In</a>
                }
            </nav>
        </div>
    </header>

    <main>
        <section class="hero" aria-labelledby="hero-title">
            <div class="hero-content">
                <h1 id="hero-title">Talk to Strangers. Meet the World.</h1>
                <p>Connect instantly with people from all over the globe through random video chats. Safe, anonymous, and incredibly fun.</p>
                <div class="cta-buttons">
                    <a href="" id="start-chat-btn" class="btn btn-primary" role="button" aria-label="Start a new random chat">Start Random Chat</a>
                    <a href="#" id="sign-in-btn" class="btn btn-secondary" role="button" aria-label="Sign in to your account">Sign In</a>
                </div>
            </div>
        </section>

        <section id="how-it-works" class="section">
            <div class="container">
                <h2 class="section-title">How It Works</h2>
                <p class="section-subtitle">Connecting is as easy as one, two, three. Get started in seconds with our simple process.</p>
                <div class="how-it-works-grid">
                    <div class="step-item">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zM12 2.25V4.5m5.834.166l-1.591 1.591M21.75 12h-2.25m-1.666 5.834L16.5 16.5M4.5 12H2.25m1.666-5.834L5.5 7.5M12 21.75V19.5" /></svg>
                        <h3>1. Click Start</h3>
                        <p>No sign-up required. Just hit the "Start Chat" button to begin your journey.</p>
                    </div>
                    <div class="step-item">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.5-2.228a4.5 4.5 0 00-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 001.13-1.897M16.5 12.553a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" /></svg>
                        <h3>2. Get Connected</h3>
                        <p>Our system will instantly pair you with a random stranger ready to talk.</p>
                    </div>
                    <div class="step-item">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6.633 10.5c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 012.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 00.322-1.672V3a.75.75 0 01.75-.75A2.25 2.25 0 0116.5 4.5c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 01-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 00-1.423-.23H5.904M14.25 9h2.25M5.904 18.75c.055 0 .11-.002.165-.004c.165-.012.33-.024.498-.036c.17-.012.338-.025.51-.037M5.904 18.75c-.266 0-.528-.02-.785-.058c-1.488-.17-2.57-1.46-2.57-2.94V11.25c0-1.48 1.08-2.77 2.57-2.94c.257-.038.52-.058.785-.058H7.5c.483 0 .964.078 1.423.23l3.114 1.04a4.5 4.5 0 001.423.23h1.294c.959 0 1.843-.493 2.37-1.321" /></svg>
                        <h3>3. Enjoy Chatting</h3>
                        <p>Have a great conversation. If you want to meet someone new, just click "Next".</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="features" class="section section-light">
            <div class="container">
                <h2 class="section-title">Awesome Features</h2>
                <p class="section-subtitle">We provide a seamless and secure chatting experience with features designed for you.</p>
                <div class="features-grid">
                    <div class="feature-card">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m0-10.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.249-8.25-3.286zm0 13.036h.008v.008H12v-.008z" /></svg>
                        <h3>Safe & Anonymous</h3>
                        <p>Your privacy is our priority. We don't store your chats, and you don't need to register to start.</p>
                    </div>
                    <div class="feature-card">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c.251.023.501.046.752.069m-1.5 0c.251.023.501.046.752.069m7.5 0c.251.023.501.046.752.069m-1.5 0c.251.023.501.046.752.069m6.062 6.062v5.714a2.25 2.25 0 01-1.591 2.243l-4.5 1.125a2.25 2.25 0 01-2.039-2.04l-.23-4.682a2.25 2.25 0 01.659-1.591L19.5 5.5m-3 0c.251.023.501.046.752.069" /></svg>
                        <h3>Smooth Interface</h3>
                        <p>Enjoy a clean, modern, and intuitive user interface that makes chatting a breeze on any device.</p>
                    </div>
                    <div class="feature-card">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" /></svg>
                        <h3>Fast Connection</h3>
                        <p>Our powerful servers ensure you get connected quickly and experience high-quality video calls with minimal lag.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <div class="why-us-content">
                    <div class="why-us-text">
                        <h2>Why Choose Us?</h2>
                        <p>We are dedicated to building a fun and safe community where people can make genuine connections. Our platform is built on cutting-edge technology to provide you with the best possible random chat experience.</p>
                        <p>Whether you're looking to kill some time, practice a new language, or meet interesting people, ChatApp is the place to be.</p>
                    </div>
                    <!-- Placeholder for illustration. Replace the SVG with your own or an <img> tag -->
                    <svg class="illustration" viewBox="0 0 500 400" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0 150 C 50 100, 150 100, 200 150 S 300 200, 350 150 S 450 100, 500 150 L 500 400 L 0 400 Z" fill="var(--soft)"></path>
                        <circle cx="250" cy="180" r="100" fill="var(--primary)" opacity="0.1"></circle>
                        <rect x="150" y="200" width="200" height="150" rx="12" fill="var(--light)" stroke="var(--primary)" stroke-width="2"></rect>
                        <circle cx="200" cy="240" r="10" fill="var(--accent)"></circle>
                        <line x1="230" y1="235" x2="320" y2="235" stroke="var(--grey)" stroke-width="4" stroke-linecap="round"></line>
                        <line x1="230" y1="250" x2="300" y2="250" stroke="var(--grey)" stroke-width="4" stroke-linecap="round"></line>
                        <circle cx="300" cy="300" r="15" fill="var(--primary)"></circle>
                        <path d="M295 297 l 5 5 l 10 -10" stroke="white" stroke-width="2" fill="none" stroke-linecap="round"></path>
                    </svg>
                </div>
            </div>
        </section>

    </main>

    <footer class="main-footer" role="contentinfo">
        <div class="container">
            <div class="footer-logo">ChatApp</div>
            <nav class="footer-nav" aria-label="Footer navigation">
                <a href="settings.html">Settings</a>
                <a href="friends.html">Friends</a>
                <a href="blocked.html">Blocked Users</a>
            </nav>
            <p class="copyright">&copy; 2024 ChatApp. All rights reserved.</p>
        </div>
    </footer>

    <script src="~/js/landingPage.js"></script>
</body>
</html>
