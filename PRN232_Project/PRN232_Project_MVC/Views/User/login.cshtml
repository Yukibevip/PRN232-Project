@{
    ViewBag.Title = "Sign In / Sign Up";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - ChatApp</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link href="~/css/login.css" rel="stylesheet" />
</head>
<body>
    <div class="login-container">
        <a href="/Home/index" class="home-link">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" style="width: 20px; height: 20px;">
                <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
            </svg>
            Back to Home
        </a>
        <div class="tab-group">
            <div class="tab active" data-tab="signin" role="tab" aria-selected="true" aria-controls="signin-form">Sign In</div>
            <div class="tab" data-tab="signup" role="tab" aria-selected="false" aria-controls="signup-form">Sign Up</div>
        </div>

        <div class="form-container">
            <!-- Sign In Form -->
            <form id="signin-form" class="form-section active" method="post" asp-controller="User" asp-action="Login">
                <h1>Welcome Back!</h1>
                @if (ViewBag.LoginError != null)
                {
                    <div style="color:red; font-weight:bold;" class="alert alert-danger">@ViewBag.LoginError</div>
                }
                <div class="form-group">
                    <label for="signin-email">UserName</label>
                    <input type="text" id="signin-email" name="username" required aria-required="true" />
                </div>
                <div class="form-group">
                    <label for="signin-password">Password</label>
                    <input type="password" id="signin-password" name="password" required aria-required="true" />
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="remember-me" name="remember" />
                    <label for="remember-me">Remember me</label>
                </div>
                <button type="submit" class="btn-submit">Sign In</button>
                <div style="text-align:right;">
                    <a href="@Url.Action("ForgotPassword", "User")" style="font-size:0.95em;">Forgot password?</a>
                </div>
            </form>

            <!-- Sign Up Form -->
            <form id="signup-form" class="form-section" method="post" asp-controller="User" asp-action="Register">
                <h1>Create Account</h1>
                @if (ViewBag.RegisterError != null)
                {
                    <div class="alert alert-danger">@ViewBag.RegisterError</div>
                }
                <div class="form-group">
                    <label for="signup-name">Display Name</label>
                    <input type="text" id="signup-name" name="username" required aria-required="true" />
                </div>
                <div class="form-group">
                    <label for="signup-email">Email Address</label>
                    <input type="email" id="signup-email" name="email" required aria-required="true" />
                </div>
                <div class="form-group">
                    <label for="signup-password">Password</label>
                    <input type="password" id="signup-password" name="password" required minlength="8" aria-required="true" />
                </div>
                <div class="form-group">
                    <label for="signup-confirm-password">Confirm Password</label>
                    <input type="password" id="signup-confirm-password" name="confirm_password" required aria-required="true" />
                </div>
                <button type="submit" class="btn-submit">Create Account</button>
            </form>
        </div>

        <div class="divider">OR</div>

        <button class="social-btn" aria-label="Continue with Google" type="button" onclick="window.location.href='@Url.Action("GoogleLogin", "User")'">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19.39 10.22C19.39 9.53 19.33 8.87 19.21 8.24H10V11.97H15.35C15.11 13.21 14.39 14.24 13.34 14.93V17.33H16.78C18.52 15.79 19.39 13.24 19.39 10.22Z" fill="#4285F4" />
                <path d="M10 20C12.69 20 14.95 19.13 16.78 17.33L13.34 14.93C12.45 15.53 11.31 15.91 10 15.91C7.68 15.91 5.68 14.31 4.88 12.18H1.33V14.67C3.09 17.9 6.29 20 10 20Z" fill="#34A853" />
                <path d="M4.88 12.18C4.69 11.64 4.59 11.07 4.59 10.5C4.59 9.93 4.69 9.36 4.88 8.82V6.33H1.33C0.5 7.84 0 9.12 0 10.5C0 11.88 0.5 13.16 1.33 14.67L4.88 12.18Z" fill="#FBBC05" />
                <path d="M10 4.09C11.45 4.09 12.78 4.6 13.8 5.56L16.85 2.5C14.95 0.94 12.69 0 10 0C6.29 0 3.09 2.1 1.33 5.33L4.88 7.82C5.68 5.69 7.68 4.09 10 4.09Z" fill="#EA4335" />
            </svg>
            Continue with Google
        </button>
    </div>

    <!-- Toast element required by login.js -->
    <div id="toast" class="toast" role="status" aria-live="polite" style="display:none;"></div>

    <script src="~/js/login.js"></script>
</body>
</html>